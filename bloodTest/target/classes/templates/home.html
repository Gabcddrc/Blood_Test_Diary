<!DOCTYPE html>
<html>

<head>
  <!-- Mobile SideNav Icon DropDown -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
  <link rel="stylesheet" href="css/main.css">
  <script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl"
    crossorigin="anonymous"></script>

  <script src="javascript/vue.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <title>Blood Test Diary</title>
</head>

<body>
  <!-- Menu Bar -->
  <div th:replace="component/navbar.html"></div>

  <div th:replace="component/mnav.html"></div>

  <!-- Patient Table -->
  <section class="section section-login light-blue lighten-5 center">
    <div class="row">
      <div class="col s12">
        <div class="card blue lighten-3">
          <form th:action="@{/editLabel}" method="POST">
            <table class="highlight">
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th>NAME & SURNAME</th>
                  <th>OPA</th>
                  <th>CURRENT TEST</th>
                  <th>COMPLETED</th>
                  <th>NOTIFIED</th>
                  <th>NEXT TEST</th>
                  <th>COMMENT</th>
                  <th>Flag</th>
                </tr>
              </thead>

              <tbody>
                <tr th:each="testSchedule:${testSchedules}">
                  <td><label><input th:id="${testSchedule.id}" name="checkboxName" th:value="${testSchedule.id}" type="checkbox" /><span></span></label></td>
                  <!-- edit test modal -->
                  <td>
                    <a class="waves-effect waves-light btn modal-trigger" href="#${test.patient.id}">
                      Edit
                    </a>
                    <!-- Modal Structure -->
                    <div id="${test.patient.id}" class="modal">
                      <!--Edit content-->
                      <div class="modal-content ">
                        <h4>Edit Test</h4>
                        <div class="row">
                          <form method="POST" class="col s12">
                            <div class="row">
                              <div class="input-field col s6">
                                <input id="patientId" type="text" placeholder="patient Id" readonly>
                                <label for="patientid">Patient_id</label>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col s6">
                                <label for="date">Date</label>
                                <input id="date" type="datetime-local" class="validate">
                              </div>
                              <div class="col s6">
                                <label for="date">next test</label>
                                <input id="date" type="datetime-local" class="validate">
                              </div>
                            </div>

                            <div class="row">
                              <div class="col s6">
                                <select class="browser-default">
                                  <option value="1">Notified</option>
                                  <option value="0">Not Notified</option>
                                </select>
                              </div>
                              <div class="col s6">
                                <select class="browser-default">
                                  <option value="1">Compeleted</option>
                                  <option value="0">Not Completed</option>
                                </select>
                              </div>

                            </div>


                            <div class="row">
                              <div class="col s12">
                                <label for="label">label</label>
                                <select id="label" class="browser-default">
                                  <option value="badge red">badge red</option>
                                  <option value="badge green">badge green</option>
                                  <option value="badge orange">badge orange</option>
                                  <option value="OPA">OPA</option>
                                </select>
                              </div>
                            </div>

                            <div class="row">
                              <div class="input-field col s12">
                                <input id="Comments" type="text" placeholder="comment" class="validate">
                                <label for="Comments">Comments</label>
                              </div>
                            </div>
                            <div class="modal-footer">
                              <a href="#!" class=" waves-light btn grey waves-effect">Cancel</a>
                              <a href="#!" class=" waves-light btn blue waves-effect" @click="sendDeleteEmail">Save</a>
                            </div>

                          </form>
                        </div>
                  </td>

                  <td>
                    <!-- Modal Trigger -->
                    <a th:attr="href='#modal' + ${testSchedule.patient.id}" class="waves-effect waves-light btn modal-trigger">
                      <span th:text="${testSchedule.patient.forename}"></span> <span th:text="${testSchedule.patient.surname}"></span></a>
                    <!-- Modal Structure -->
                    <div th:attr="id = 'modal' + ${testSchedule.patient.id}" class="modal modal-fixed-footer">
                      <div class="modal-content">

                        <blockquote>
                          <h4 th:text="${testSchedule.patient.forename}"></h4>
                          <h4 th:text="${testSchedule.patient.surname}"></h4>
                        </blockquote>

                        <div class="row">
                          <!-- Place -->
                          <div class="col s12 place mt-4 p-0">
                            <div class="col s2 m2 l2"><i class="material-icons"> place </i></div>
                            <div class="col s10 m10 l10">
                              <p class="m-0" th:text="*{address}"></p>
                            </div>
                          </div>
                          <!-- Phone -->
                          <div class="col s12 phone mt-4 p-0">
                            <div class="col s2 m2 l2"><i class="material-icons"> call </i></div>
                            <div class="col s10 m10 l10">
                              <p class="m-0">insert phone number on db</p>
                            </div>
                          </div>
                          <!-- Mail -->
                          <div class="col s12 mail mt-4 p-0">
                            <div class="col s2 m2 l2"><i class="material-icons"> mail_outline </i></div>
                            <div class="col s10 m10 l10">
                              <p class="m-0" th:text="${testSchedule.patient.email}"></p>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Agree</a>
                      </div>
                    </div>
                  </td>
                  <td th:text="${testSchedule.OPA}"></td>
                  <td th:text="${testSchedule.date}"></td>
                  <td th:text="${testSchedule.completed}"></td>
                  <td th:text="${testSchedule.notified}"></td>
                  <td th:text="${testSchedule.nextSchedule}"></td>
                  <td th:text="${testSchedule.commet}"></td>
                  <td><span th:class="${testSchedule.idlabel}" id="b1"></span></td>

                </tr>




              </tbody>

              <input type="submit" name="submitBtn" value="Mark Critical" class="waves-effect waves-light btn-large red">
              <input type="submit" name="submitBtn" value="Mark Urgent" class="waves-effect waves-light btn-large orange">
              <input type="submit" name="submitBtn" value="Mark Monitor" class="waves-effect waves-light btn-large green">
            </table>
          </form>
        </div>
      </div>
    </div>



  </section>

  <div th:replace="component/footer.html"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>

  <script>
    const sideNav = document.querySelector('.sidenav');
    M.Sidenav.init(sideNav, {});
    //Modal
    $(document).ready(function () {
      $(".modal").modal();
    });
  </script>

  <script>
    $(document).ready(function () {
      $("#1").click(function () {
        $("#red").click(function () {
          document.getElementById("b1").className = "badge red";
        });
      });
    });
  </script>


</body>

</html>